#include "../matplotlibcpp.h"

#include <cmath>
#include <tuple>

// has to be compile with -DUSE_VARIADIC_TEMPLATES_ARGS

namespace plt = matplotlibcpp;
using namespace std;

int main()
{
  // streamplot
  vector<double> x1d = {1.2, 2.4, 3.6, 4.8, 6};
  vector<double> y1d = {1.5, 3, 4.5, 6, 7.5};
  vector<vector<double>> u2d = {{0.362358, -0.737394, -0.896758, 0.087499, 0.96017},
                                {0.362358, -0.737394, -0.896758, 0.087499, 0.96017},
                                {0.362358, -0.737394, -0.896758, 0.087499, 0.96017},
                                {0.362358, -0.737394, -0.896758, 0.087499, 0.96017},
                                {0.362358, -0.737394, -0.896758, 0.087499, 0.96017}};
  vector<vector<double>> v2d = {{0.997495, 0.997495, 0.997495, 0.997495, 0.997495},
                                {0.14112, 0.14112, 0.14112, 0.14112, 0.14112},
                                {-0.97753, -0.97753, -0.97753, -0.97753, -0.97753},
                                {-0.279415, -0.279415, -0.279415, -0.279415, -0.279415},
                                {0.938, 0.938, 0.938, 0.938, 0.938}};
  vector<vector<double>> mag2d = {{1.92094, 2.83019, 3.9, 5.02892, 6.18466},
                                  {3.2311, 3.84187, 4.68615, 5.66039, 6.7082},
                                  {4.65725, 5.1, 5.76281, 6.57951, 7.5},
                                  {6.11882, 6.4622, 6.99714, 7.68375, 8.48528},
                                  {7.59539, 7.87464, 8.31925, 8.90449, 9.60469}};
  plt::streamplot(x1d, y1d, u2d, v2d,  make_tuple("color", mag2d));

  // quiver
  vector<double> xq = {1.2, 2.4, 3.6, 4.8, 6, 1.2, 2.4, 3.6, 4.8, 6, 1.2, 2.4, 3.6, 4.8, 6, 1.2, 2.4, 3.6, 4.8, 6, 1.2, 2.4, 3.6, 4.8, 6};
  vector<double> yq = {1.5, 1.5, 1.5, 1.5, 1.5, 3, 3, 3, 3, 3, 4.5, 4.5, 4.5, 4.5, 4.5, 6, 6, 6, 6, 6, 7.5, 7.5, 7.5, 7.5, 7.5};
  vector<double> uq = {0.362358, -0.737394, -0.896758, 0.087499, 0.96017, 0.362358, -0.737394, -0.896758, 0.087499, 0.96017, 0.362358, -0.737394, -0.896758, 0.087499, 0.96017, 0.362358, -0.737394, -0.896758, 0.087499, 0.96017, 0.362358, -0.737394, -0.896758, 0.087499, 0.96017};
  vector<double> vq = {0.997495, 0.997495, 0.997495, 0.997495, 0.997495, 0.14112, 0.14112, 0.14112, 0.14112, 0.14112, -0.97753, -0.97753, -0.97753, -0.97753, -0.97753, -0.279415, -0.279415, -0.279415, -0.279415, -0.279415, 0.938, 0.938, 0.938, 0.938, 0.938};
  vector<double> magq = {1.92094, 2.83019, 3.9, 5.02892, 6.18466, 3.2311, 3.84187, 4.68615, 5.66039, 6.7082, 4.65725, 5.1, 5.76281, 6.57951, 7.5, 6.11882, 6.4622, 6.99714, 7.68375, 8.48528, 7.59539, 7.87464, 8.31925, 8.90449, 9.60469};
  plt::quiver(xq, yq, uq, vq, magq)

  // plot_surface
  std::vector<std::vector<double>> x, y, z;
  for (double i = -5; i <= 5;  i += 0.25) {
    std::vector<double> x_row, y_row, z_row;
    for (double j = -5; j <= 5; j += 0.25) {
      x_row.push_back(i);
      y_row.push_back(j);
      z_row.push_back(::std::sin(::std::hypot(i, j)));
    }
    x.push_back(x_row);
    y.push_back(y_row);
    z.push_back(z_row);
  }

  plt::plot_surface(x, y, z, make_tuple(
      "edgecolor", "black",
      "linewidth", 2.0f,
      "linestyle", "--",
      "alpha", 0.5f,
      "rstride", 10,
      "cstride", 10,
      "cmap", "gist_rainbow")));
  plt::show();


}
